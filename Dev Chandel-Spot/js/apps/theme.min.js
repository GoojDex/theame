function theme_init(){if(theme.wrapper.all=$("header").parent().parent(),!theme.wrapper.all.length)return sneeit.error.alert("Can not find wrapper in layout");if(theme.wrapper.header=theme.wrapper.all.find("header"),!theme.wrapper.header.length)return sneeit.error.alert("Can not find header in layout");var e=theme.wrapper.all.find(" > c-wiz").find(" > div").find("> c-wiz").find("> div");if(theme.wrapper.toolbar.all=e.find("> div").first(),theme.wrapper.toolbar.buttons.all=theme.wrapper.toolbar.all.find(">div"),theme.wrapper.toolbar.buttons.primary_wrapper=theme.wrapper.toolbar.buttons.all.last().prev(),theme.wrapper.toolbar.buttons.all.last().remove(),theme.wrapper.editor=e.find("> div").last(),!theme.wrapper.toolbar.all.length)return sneeit.error.alert("Can not find toolbar in layout");if(!theme.wrapper.toolbar.buttons.all.length)return sneeit.error.alert("Can not find key buttons in layout");if(!theme.wrapper.toolbar.buttons.primary_wrapper.length)return sneeit.error.alert("Can not find button wrapper in layout");if(!theme.wrapper.editor.length)return sneeit.error.alert("Can not find editor in layout");theme.wrapper.toolbar.buttons.primary_wrapper.addClass("sneeit-theme-app-toolbar-primary-button");var t=theme.wrapper.toolbar.buttons.primary_wrapper.find('div[role="button"]').attr("data-tooltip");theme.wrapper.toolbar.buttons.primary_wrapper.find('div[role="button"]').append(html_tag("strong",""," "+t)),theme.wrapper.toolbar.buttons.primary_button=theme.wrapper.toolbar.buttons.primary_wrapper.find('div[role="button"]'),theme.wrapper.toolbar.buttons.primary_button.on("click",function(){$(document).find(".sneeit-theme-app-menu-item-code").click()}),theme_main_menu(),theme.wrapper.toolbar.buttons.primary_button.on("mouseenter",function(){var e=theme_fix_blogger_unicode_error(theme.code.current);theme.code.set(e)})}function theme_main_menu(){var e="",t="",r="";for(var a in theme.apps)e+=html_tag_a({class:"sneeit-theme-app-menu-item sneeit-theme-app-menu-item-"+a,"data-page":a},a),r+=html_tag("div","sneeit-theme-app-toolbar sneeit-theme-app-toolbar-"+a,a),"code"!=a&&(t+=html_tag("div","sneeit-theme-app-page sneeit-theme-app-page-custom sneeit-theme-app-page-"+a,a));theme.wrapper.header.html(e).addClass("sneeit-theme-app-menu"),theme.wrapper.header.stop().animate({opacity:1},500),$(html_tag_a("class=sneeit-logo&target=_blank",html_tag_img("logo.png"),"https://www.devchandel.tk")).appendTo(theme.wrapper.header),$(html_tag_a({class:"sneeit-theme-app-history-back",title:"Back to Your Blog Dashboard",target:"_parent"},html_tag_icon("arrow_back"),"https://www.blogger.com/blog/posts/"+blog.id)).prependTo(theme.wrapper.header),$(r).prependTo(theme.wrapper.toolbar.all),$(t).insertBefore(theme.wrapper.editor),theme.wrapper.editor.addClass("sneeit-theme-app-page sneeit-theme-app-page-code active").removeClass("sneeit-theme-app-page-custom"),$(".sneeit-theme-app-menu-item-code").click().addClass("active"),$(".sneeit-theme-app-page").css("height",$(".sneeit-theme-app-page-code").height()+"px"),$(window).on("resize",function(){$(document).find(".sneeit-theme-app-menu-item-code").click(),setTimeout(function(){$(document).find(".sneeit-theme-app-page").css("height",$(document).find(".sneeit-theme-app-page-code").height()+"px")},500)}),$(".sneeit-theme-app-menu-item").click(function(){if(!$(this).is(".active")){$(".sneeit-theme-app-menu-item.active").removeClass("active"),$(".sneeit-theme-app-toolbar.active").removeClass("active"),$(".sneeit-theme-app-page.active").removeClass("active");var e=$(this).attr("data-page");$(".sneeit-theme-app-toolbar-"+e).addClass("active"),$(".sneeit-theme-app-page-"+e).addClass("active"),$(this).addClass("active"),"code"==e?theme.wrapper.toolbar.buttons.all.show():(theme.wrapper.toolbar.buttons.all.hide(),theme.wrapper.toolbar.buttons.primary_wrapper.show())}})}function blogger_json_page_title_string_decode(e){return e=e.replace(/\\x([0-9a-f]{2})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))}),e=e.replace(/\\u([0-9a-f]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))}),e=e.replace(/\\\'/gi,"'"),e=e.replace(/'/gi,"\\'"),e}function theme_fix_blogger_unicode_error(e){var t="<b:widget-setting name='pageListJson'><![CDATA[",r="]]></b:widget-setting>",a="'title': '",n="', 'position':";e=e.split(t);for(var o=1;o<e.length;o++){for(var i=e[o].split(r),p=i[0].split(a),s=1;s<p.length;s++){var l=p[s].split(n);l[0]=blogger_json_page_title_string_decode(l[0]),p[s]=l.join(n)}i[0]=p.join(a),e[o]=i.join(r)}return e=e.join(t),e}var theme={code:{current:"",backup:[],set:function(e){theme.code.current!=e&&(theme.code.backup.push(theme.code.current),document.dispatchEvent(new CustomEvent("setCodeMirror",{detail:e})),theme.code.current=e)},get:function(){document.dispatchEvent(new CustomEvent("getCodeMirror"))}},wrapper:{all:null,header:null,toolbar:{all:null,buttons:{all:null,primary_wrapper:null,primary_button:null}},editor:null},apps:{options:{},menus:{code:null,xml:null,json:null,editing:null,location:"",sources:{posts:{title:"Posts"},pages:{title:"Pages"},categories:{title:"Categories"},custom_links:{title:"Custom Links"}}},translate:{},demos:{},updates:{},code:{}}};$(document).ready(function(){if(-1!=sneeit.loc.href.indexOf("/blog/themes/edit/")&&-1!=sneeit.loc.href.indexOf(sneeit.query.theme)){if(empty(blog.id))return sneeit.error.alert("Can not find blog id");var e=document.getElementsByTagName("header")[0];e.setAttribute("style","opacity:0"),document.addEventListener("retCodeMirror",function(e){var t=e.detail;theme.code.current=t}),html_tag_injects(["controls.css","theme.css","theme-options.css","theme-menus.css","theme-demos.css","theme-translate.css","theme-updates.css","plugins/jquery.min.js","injects/connector.js"]),sneeit_loader_show(),$.get("https://www.blogger.com/feeds/"+blog.id+"/posts/default?alt=json",function(e){var t=sneeit_blogger_parse_json(e);empty(t)||(blog.cats=t.cats,blog.url=t.url,blog.name=t.name,sneeit_str_is_ended(blog.url,"/")&&(blog.url=blog.url.substring(0,blog.url.length-1)),empty(t.entry)||(blog.posts=t.entry)),$.get("https://www.blogger.com/feeds/"+blog.id+"/pages/default?alt=json&max-results=9999",function(e){var t=sneeit_blogger_parse_json(e);empty(t)||empty(t.entry)||(blog.pages=t.entry),sneeit_wait_thing(function(){return $("header").length&&$(".CodeMirror").length},function(){sneeit_loader_hide(),theme_init()})}).fail(function(){sneeit_wait_thing(function(){return $("header").length&&$(".CodeMirror").length},function(){sneeit_loader_hide(),theme_init()})})}).fail(function(){sneeit_wait_thing(function(){return $("header").length&&$(".CodeMirror").length},function(){sneeit_loader_hide(),theme_init()})})}else $("header").css("opacity","1")});