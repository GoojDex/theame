function sneeit_post_seo_item($score,$text){switch($score){case"bad":var icon="error";break;case"ok":var icon="check_circle";break;default:$score="good";var icon="gpp_good"}return html_tag("div",".sneeit-post-seo-item."+$score,html_tag_icon(icon)+html_tag("span","",$text))}function sneeit_post_seo(){var bad_score=0,total_seo_tests=0;bad_score=0,total_seo_tests=0;var the_dummy=$(".sneeit-post-dummy");$(".sneeit-post-dummy").html(post.code.current),$(document).find(".sneeit-post-app-toolbar-seo").html(html_tag("h2","","Search Engine Optimization (SEO)"));var title=post.wrapper.workspace.title.val(),content=$(".sneeit-post-dummy").text(),description=content;description.length>post.apps.seo.standards.max_description_length&&(description=description.substring(0,post.apps.seo.standards.max_description_length)),post.wrapper.workspace.side.description.length&&(description=post.wrapper.workspace.side.description.val());var html="",seo_result_html=html_tag("div",".sneeit-post-seo-result",html_tag("h2","",html_tag_icon("visibility")+html_tag("span","","Search Result Preview"))+html_tag("div",".sneeit-post-seo-result-inner",html_tag("div",".sneeit-post-seo-result-title",title.length>70?title.substring(0,70)+"...":title)+html_tag("div",".sneeit-post-seo-result-desc",description.length>post.apps.seo.standards.max_description_length?description.substring(0,post.apps.seo.standards.max_description_length)+"...":description)));total_seo_tests+=2,title.length>60?(html+=sneeit_post_seo_item(title.length>70?"bad":"ok","Recommended post title length is 60 characters, but yours is "+title.length+". Please optimize your title."),bad_score+=2):sneeit_word_count(title)<3&&(html+=sneeit_post_seo_item("ok","The page title is too short. Use the space to add keyword variations or create compelling call-to-action copy."),bad_score+=1),total_seo_tests+=2,description?description.length<100?(html+=sneeit_post_seo_item("ok","Search description is under 100 characters long. It is better if you can add more characters to the description"),bad_score+=1):description.length>post.apps.seo.standards.max_description_length&&(html+=sneeit_post_seo_item("ok","The search description is over "+post.apps.seo.standards.max_description_length+" characters. Reducing the length will ensure the entire description will be visible."),bad_score+=1):(html+=sneeit_post_seo_item("bad",'Search description can not be empty! Please make sure you <a href="https://www.devchandel.tk" target="_blank">enabled Search Preference</a> and input your post description for better SEO effect.'),bad_score+=2),total_seo_tests+=2;var desc_word_count=sneeit_word_count(content),images;if(content.trim()?desc_word_count<300&&(html+=sneeit_post_seo_item("bad","Recommended content length is 300 words, but yours is "+desc_word_count+". Please add more words."),bad_score+=2):(html+=sneeit_post_seo_item("bad","The post content can not be empty!"),bad_score+=2),total_seo_tests+=2,the_dummy.find("img, amp-img").length){var none_alt_images=0;the_dummy.find("img, amp-img").each((function(){$(this).attr("alt")||none_alt_images++})),none_alt_images&&(html+=sneeit_post_seo_item("ok",none_alt_images+" image"+(none_alt_images>1?"s":"")+" on this page are missing alt attribute, consider adding alt attribute for all images."),bad_score+=1)}else html+=sneeit_post_seo_item("bad","No images appear in this page, consider adding some as appropriate."),bad_score+=2;total_seo_tests+=2;var heading_h1=the_dummy.find("h1").length;heading_h1&&(html+=sneeit_post_seo_item("bad","Not allow H1 tags in post content. Please remove all H1 tags from your content."),bad_score+=2),total_seo_tests+=2;var heading_tag=0,heading_tag_all_empty=!0;heading_h1||(the_dummy.find("h1, h2, h3, h4, h5, h6").each((function(){heading_tag++;var txt=$(this).text();""!=(txt=txt.trim())&&(heading_tag_all_empty=!1)})),heading_tag?heading_tag_all_empty&&(html+=sneeit_post_seo_item("bad","All subheadings and subheadings (h2, h3, h4, h5, h6) are empty. Please input some texts for them."),bad_score+=2):(html+=sneeit_post_seo_item("bad","The text does not contain any heading or subheading (h2, h3, h4, h5, h6). Add at least one."),bad_score+=2)),total_seo_tests+=2;var _spliter_heading_tag_="___HEADING_TAG___";if(heading_tag&&!heading_tag_all_empty){var heading_tag_split=0,txt;if(the_dummy.find("h1, h2, h3, h4, h5, h6").each((function(){$(this).replaceWith("___HEADING_TAG___")})),(txt=(txt=(txt=the_dummy.text()).trim()).split("___HEADING_TAG___")).length>1){for(var i=1;i<txt.length;i++)sneeit_word_count(txt[i])>300&&heading_tag_split++;heading_tag_split&&(html+=sneeit_post_seo_item("bad",heading_tag_split+" heading "+(heading_tag_split>1?"s are":" is")+" followed by more than the recommended maximum of 300 words. Try to insert more headings to split your content."),bad_score+=2)}}total_seo_tests+=2;var _spliter_paragraph_tag_="___PARAGRAPH_TAG___",txt;txt=(txt=(txt=(txt=the_dummy.text()).replaceAll("___HEADING_TAG___","___PARAGRAPH_TAG___")).replaceAll("\n","___PARAGRAPH_TAG___")).split("___PARAGRAPH_TAG___");for(var long_paragraphs=0,i=0;i<txt.length;i++)sneeit_word_count(txt[i])>150&&long_paragraphs++;long_paragraphs&&(html+=sneeit_post_seo_item("ok","You have "+long_paragraphs+" paragraph"+(long_paragraphs>1?"s which have":" which has")+" more than the recommended maximum of 150 words. If you can, just try to split all long paragraphs"),bad_score+=1),total_seo_tests+=2;var _spliter_sentence_tag_="___SENTENCE_TAG___";the_dummy.html(post.code.current),the_dummy.find("h1, h2, h3, h4, h5, h6").each((function(){$(this).replaceWith("___SENTENCE_TAG___"+$(this).text().trim()+"___SENTENCE_TAG___")}));var sentences=the_dummy.text();sentences=(sentences=(sentences=(sentences=(sentences=(sentences=(sentences=(sentences=sentences.replaceAll("\n","___SENTENCE_TAG___")).replaceAll("...","___SENTENCE_TAG___")).replaceAll(".","___SENTENCE_TAG___")).replaceAll("!!!","___SENTENCE_TAG___")).replaceAll("?!","___SENTENCE_TAG___")).replaceAll("?","___SENTENCE_TAG___")).replaceAll("!","___SENTENCE_TAG___")).split("___SENTENCE_TAG___");for(var long_sentences=0,total_sentences=0,i=0;i<sentences.length;i++)sneeit_word_count(sentences[i])>20&&long_sentences++,sentences[i].length>3&&total_sentences++;total_sentences&&long_sentences/total_sentences>.25&&(html+=sneeit_post_seo_item("bad",(100*long_sentences/total_sentences).toFixed(2)+"% of the sentences contain more than 20 words, which is more than the recommended maximum of 25%. Try to shorten the sentences."),bad_score+=2),total_seo_tests+=2;for(var transition_words=["and","first of all","also","another","furthermore","finally","in addition","because","so","due to","while","since","therefore","same","less","rather","while","yet","opposite","much as","either","as a result","hence","consequently","therefore","in conclusion","seems like","maybe","probably","almost","most of all","most noteworthy","especially relevant"],trans_word_sen=0,i=0;i<sentences.length;i++)if(!(sneeit_word_count(sentences[i])<3))for(var j=0;j<transition_words.length;j++)if(-1!=sentences[i].indexOf(transition_words[j])){trans_word_sen++;break}total_sentences&&trans_word_sen/total_sentences<.3&&(html+=sneeit_post_seo_item("bad",(100*trans_word_sen/total_sentences).toFixed(2)+'% of the sentences contain <a href="https://www.devchandel.tk" target="_blank">a transition word or phrase</a>, which is less than the recommended minimum of 30%. Please add more transition words.'),bad_score+=2);for(var raw_keywords=[],key_title=title.toLowerCase().split(" "),i=0;i<key_title.length-1;i++)raw_keywords.push(key_title[i]+" "+key_title[i+1]);for(var i=0;i<key_title.length-2;i++)raw_keywords.push(key_title[i]+" "+key_title[i+1]+" "+key_title[i+2]);for(var i=0;i<key_title.length-3;i++)raw_keywords.push(key_title[i]+" "+key_title[i+1]+" "+key_title[i+2]+" "+key_title[i+3]);for(var sanitize_keys=["...","?!","!!","!!!","~","`","!","@","#","$","%","^","&","*","(",")","-","_","+","=","{","[","]","}","\\","|",":",";","'",'"',",","<",".",">","?","/"],i=0;i<raw_keywords.length;i++)for(var j=0;j<sanitize_keys.length;j++)raw_keywords[i].lastIndexOf(sanitize_keys[j])==raw_keywords[i].length-1&&(raw_keywords[i]=raw_keywords[i].substring(0,raw_keywords[i].length-1));for(var sanitized_keywords=[],sanitized_keywords_max_score=0,sanitized_keywords_max_index=-1,sanitized_keywords_max_message="",i=0;i<raw_keywords.length;i++){for(var j=0;j<sanitize_keys.length&&-1==raw_keywords[i].indexOf(sanitize_keys[j]);j++);j>=sanitize_keys.length&&sanitized_keywords.push(raw_keywords[i])}var score_per_test=4,number_of_test=5,key_word_total_test=20;total_seo_tests+=20,content=content.toLowerCase(),description=description.toLowerCase();var first_para_content=content;content.length>post.apps.seo.standards.max_description_length&&(first_para_content=content.substring(0,post.apps.seo.standards.max_description_length)),the_dummy.html(post.code.current);for(var i=0;i<sanitized_keywords.length;i++){var kw=sanitized_keywords[i],ks=0,ms="",kw_tag='"<b>'+kw+'</b>"';if(-1!=first_para_content.indexOf(kw)?ks+=4:ms+=sneeit_post_seo_item("bad","The focus keyword "+kw_tag+" doesn't appear in the first paragraph of the copy. Make sure the topic is clear immediately."),-1!=description.indexOf(kw)?ks+=4:ms+=sneeit_post_seo_item("bad","The search description does not contain the focus keyword "+kw_tag+"."),-1!=content.indexOf(kw)){var word_count=sneeit_word_count(content),key_count=content.split(kw),density=100*(key_count=key_count.length-1)/word_count;if(density>=.5&&density<2.5)ks+=4;else if(density<.5){var add_time=parseInt(.5*word_count/100)+1-key_count;ms+=sneeit_post_seo_item("bad","The keyword density is "+density.toFixed(1)+" which lower than the advised 0.5% minimum. You need to add more "+add_time+" keyword "+kw_tag+".")}else{var remove_time=key_count-parseInt(2.5*word_count/100)+1;ms+=sneeit_post_seo_item("bad","The keyword density is "+density.toFixed(1)+" which way over the advised 2.5% maximum. You need to remove "+remove_time+" keyword "+kw_tag+".")}}else ms+=sneeit_post_seo_item("bad","Your post content does not contain the focus keyword "+kw_tag+".");var kw_in_subheading=!1;the_dummy.find("h1, h2, h3, h4, h5, h6").each((function(){var text;-1!=$(this).text().trim().toLowerCase().indexOf(kw)&&(kw_in_subheading=!0)})),kw_in_subheading?ks+=4:ms+=sneeit_post_seo_item("ok","You have not used the focus keyword "+kw_tag+" in any heading (such as an H2) in your copy.");var kw_in_img_alt=!1;the_dummy.find("img, amp-img").each((function(){var alt=$(this).attr("alt");void 0!==alt&&-1!=(alt=alt.trim().toLowerCase()).indexOf(kw)&&(kw_in_img_alt=!0)})),kw_in_img_alt?ks+=4:ms+=sneeit_post_seo_item("ok","The images on this page do not have alt attributes containing the focus keyword "+kw_tag+"."),ks&&(ks>sanitized_keywords_max_score||ks==sanitized_keywords_max_score&&sanitized_keywords[sanitized_keywords_max_index].length<kw.length)&&(sanitized_keywords_max_score=ks,sanitized_keywords_max_index=i,sanitized_keywords_max_message=ms)}var bot_message="";bad_score+=20-sanitized_keywords_max_score;var final_score=parseInt(100*(40-bad_score)/40);bot_message=sanitized_keywords_max_score>0?final_score>90?html_tag("span",".sneeit-post-seo-score-excellent",html_tag("span","",(100==final_score?"Excellent":"High score")+' for keyword "'+html_tag("b","",sanitized_keywords[sanitized_keywords_max_index])+'"')):'Our bots analyzed and understand that your post is talking about "'+html_tag("b","",sanitized_keywords[sanitized_keywords_max_index])+'". But your post still has some problems that need to be fixed. Please follow the below hints of issues and fix all them to have a better SEO score':"We are not sure what your post is talking about. Please pick a focus keyword for your topic and then put it into <b>post title, first "+post.apps.seo.standards.max_description_length+" characters of content, post description, headings, image alt and permalink. Also repeat the keyword in content with density from 0.5% to 2.5%.</b>",html=sanitized_keywords_max_message+html;var score_class=final_score>=50?final_score>=90?"good":"ok":"bad",score_icon="good"==score_class?"policy":"pest_control";html=seo_result_html+html_tag("div",".sneeit-post-seo-bot-message."+score_class,html_tag("div",".sneeit-post-seo-bot-score."+score_class,final_score+"/100")+html_tag("div",".sneeit-post-seo-bot-detail",html_tag("h2","",html_tag_icon(score_icon))+html_tag("div","",bot_message))+html_tag("div",".clear"))+html,$(document).find(".sneeit-post-app-page-seo").html(html)}